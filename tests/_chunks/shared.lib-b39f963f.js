"use strict";var e=require("./dav-d6854223.js");require("k6/encoding"),require("k6/http"),require("k6"),require("k6/metrics");exports.options=function(e){var t=e.files,i=e.plays;return{thresholds:t.reduce((function(e,t){return e["".concat(i.davUpload.metricTrendName,"{asset:").concat(t.unit+t.size.toString(),"}")]=[],e["".concat(i.davPropfind.metricTrendName,"{asset:").concat(t.unit+t.size.toString(),"}")]=[],e["".concat(i.davDelete.metricTrendName,"{asset:").concat(t.unit+t.size.toString(),"}")]=[],e["".concat(i.davRestore.metricTrendName,"{asset:").concat(t.unit+t.size.toString(),"}")]=[],e}),{})}},exports.uploadDeleteTrashRestore=function(t){var i=t.files,n=t.account,a=t.credential,r=t.plays,o=[];i.forEach((function(t){var i,s=t.unit+t.size.toString(),d=e.buildAsset({name:"".concat(n.login,"-dummy.zip"),unit:t.unit,size:t.size});r.davUpload.exec({credential:a,asset:d,userName:n.login,tags:{asset:s}});var c=r.davPropfind.exec({credential:a,userName:n.login,tags:{asset:s},path:d.name,body:'<?xml version="1.0"?><d:propfind  xmlns:d="DAV:" xmlns:oc="http://owncloud.org/ns"><d:prop><oc:fileid /></d:prop></d:propfind>'}),l=null===(i=e.parseXML(c.response.body).getElementsByTagName("oc:fileid")[0].childNodes[0].textContent)||void 0===i?void 0:i.split("!").pop();if(!l)throw new Error("no fileid");o.push({id:s,name:d.name,fileid:l})})),o.forEach((function(e){r.davDelete.exec({credential:a,userName:n.login,path:e.name,tags:{asset:e.id}})})),o.forEach((function(e){r.davRestore.exec({credential:a,userName:n.login,fileid:e.fileid,path:e.name,tags:{asset:e.id}})}))};
