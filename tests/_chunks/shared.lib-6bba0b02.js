"use strict";var e=require("./dav-d6854223.js"),t=require("./times-ca8727c2.js");require("k6/encoding"),require("k6/http"),require("k6"),require("k6/metrics");var a={davUpload:new e.Upload,davCreate:new e.Create,davPropfind:new e.Propfind,davDelete:new e.Delete};exports.options=function(e){return{thresholds:e.files.reduce((function(e,t){return e["".concat(a.davUpload.metricTrendName,"{asset:").concat(t.unit+t.size.toString(),"}")]=[],e["".concat(a.davCreate.metricTrendName,"{asset:").concat(t.unit+t.size.toString(),"}")]=[],e["".concat(a.davDelete.metricTrendName,"{asset:").concat(t.unit+t.size.toString(),"}")]=[],e}),{})}},exports.propfind=function(n){var r=n.files,i=n.account,c=n.credential,o=n.depth,s=void 0===o?5:o,d=[],u="".concat(__VU,"-").concat(__ITER);s-=1,a.davCreate.exec({credential:c,path:u,userName:i.login}),r.forEach((function(n){var r=n.unit+n.size.toString(),o=e.buildAsset({name:"".concat(i.login,"-dummy.zip"),unit:n.unit,size:n.size}),l=t.times_1(s,(function(){return e.randomString()})).reduce((function(e,t){return e.push(t),a.davCreate.exec({credential:c,path:e.join("/"),userName:i.login,tags:{asset:r}}),e}),[u]).join("/");a.davUpload.exec({credential:c,asset:o,path:l,userName:i.login,tags:{asset:r}}),d.push({id:r,name:o.name,folder:l})})),a.davPropfind.exec({credential:c,path:u,userName:i.login}),d.forEach((function(t){a.davDelete.exec({credential:c,userName:i.login,path:[].concat(e._toConsumableArray(t.folder.split("/")),[t.name]).join("/"),tags:{asset:t.id}})})),a.davDelete.exec({credential:c,userName:i.login,path:u})};
