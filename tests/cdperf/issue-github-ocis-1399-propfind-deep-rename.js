"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../_chunks/dav-d6854223.js"),n=require("../_chunks/times-ca8727c2.js");require("k6/encoding"),require("k6/http");var a=require("../_chunks/options-e97d0c46.js");require("k6"),require("k6/metrics"),require("k6/crypto");var t={size:10,unit:"KB"},r=new e.Factory(e.buildAccount({login:e.ACCOUNTS.ADMIN})),c={davCreate:new e.Create,davUpload:new e.Upload,davMove:new e.Move,davDelete:new e.Delete,davPropfind:new e.Propfind},o=a.options({tags:{test_id:"propfind-deep-rename",issue_url:"github.com/owncloud/ocis/issues/1399"}});exports.default=function(){var a={name:r.account.login,password:r.account.password,credential:r.credential},o=n.times_1(50,(function(e){return"VU-".concat(__VU,"-ITER-").concat(__ITER,"-I-").concat(e)})).reduce((function(t,r,o){return t.push([r].concat(e._toConsumableArray(n.times_1(5,(function(e){return"D-".concat(e+1)}))))),t[o].forEach((function(e,n){c.davCreate.exec({credential:a.credential,path:t[o].slice(0,n+1).join("/"),userName:a.name})})),t}),[]),i=e.buildAsset(e._objectSpread2(e._objectSpread2({},t),{},{name:"dummy.zip"}));o.forEach((function(e){e.forEach((function(n,t){c.davUpload.exec({asset:i,credential:a.credential,userName:a.name,path:e.slice(0,t+1).join("/")})}))})),o.forEach((function(n){n.forEach((function(t,r){var o="renamed-".concat(n.slice(n.length-r-1,n.length-r)),i=n.slice(0,n.length-r).join("/"),s=[].concat(e._toConsumableArray(n.slice(0,n.length-r-1)),[o]).join("/");c.davMove.exec({credential:a.credential,userName:a.name,path:i,destination:s}),c.davPropfind.exec({credential:a.credential,userName:a.name,path:s}),n[n.length-1-r]=o}))})),o.forEach((function(e){c.davDelete.exec({credential:a.credential,userName:a.name,path:e[0]})}))},exports.options=o;
